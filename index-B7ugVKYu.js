(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();function p(i){return new Promise((e,t)=>{const n=document.createElement("script");n.src=i,n.onload=()=>e(i),n.onerror=o=>t(`Error loading script: ${i}`),document.body.appendChild(n)})}async function x(){try{console.log("Loading html2canvas..."),await p("https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"),console.log("html2canvas loaded!"),console.log("Loading Fabric.js..."),await p("https://cdn.jsdelivr.net/npm/fabric@6.4.3/dist/index.js"),console.log("Fabric.js loaded!"),console.log("Loading JSZip..."),await p("https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"),console.log("JSZip loaded!"),await p("https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"),C.runSdk()}catch(i){console.error("Error loading scripts:",i)}}x();const C={runSdk(){T(),E()}};let c="",w="";function I(){return fetch("https://bmrtapplicationdev.appskeeper.in/v1/sessions/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appToken:"0f4365b8-a41d-41c3-80d9-b23bc6e2594f",deviceToken:"qwe123"})}).then(t=>t.json()).then(t=>{const n=t.result.token;console.log(n,">>>accesstoken");const o="https://bmrtapplicationdev.appskeeper.in/v1/issues",s={appInfo:{minSdk:"21",targetSdk:"30",isDebugMode:!0,debuggerAttach:!1,packageId:"com.example.app",locale:"en_US",buildFlavour:"release",versionCode:"123",versionName:"1.2.3"},deviceInfo:{name:"Pixel 4a",manufacturer:"Google",model:"Pixel 4a",deviceId:"12345abcdef",deviceVersion:"Android 12"},platform:{isRooted:!1,os:"iOS"},dimensions:{width:"1080",height:"2340",scale:"3.0",dpi_x:"400",dpi_y:"400",density:"2.75",density_dpi:"420"},type:"bug",email:"user@example.com",accessToken:n,appToken:"0f4365b8-a41d-41c3-80d9-b23bc6e2594f",video:"https://example.com/video.mp4",screenshot:"https://example.com/screenshot.png",shortSummary:"App crashes when clicking the button",description:"The app crashes immediately after clicking the button on the main screen.",trackingSdkVersion:"2.1.0",totalDuration:"5m30s",createdAt:"2024-11-08T10:30:00.000Z",uploadedAt:"2024-11-08T10:33:12.624Z"};return fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(s)})}).then(t=>t.json()).then(t=>{console.log("Issue created successfully",t),c=t.result.url;const n=t.result.name;return console.log(c,">>>URL for zip file"),{urlForZipFile:c,idIssue:n}}).catch(t=>{console.error("Error:",t)})}function E(){const i=document.getElementById("def-camera"),e=document.getElementById("def-img"),t=document.getElementById("def-ui");i.addEventListener("click",function(){i.textContent==="Capture"?(I(),i.style.visibility="hidden",t.style.backgroundColor="white",html2canvas(document.querySelector("body"),{allowTaint:!0,useCORS:!0,height:window.innerHeight,width:window.innerWidth,x:window.scrollX,y:window.scrollY}).then(n=>{const o=n.toDataURL(),s=h(o);e.src=o,e.style.opacity="1",i.style.visibility="visible",t.style.backgroundColor="gray",e.addEventListener("click",function(){S(e.src)}),sendToAPI(s,"")}),i.textContent="Cancel"):i.textContent==="Cancel"&&(e.style.opacity="0",i.textContent="Capture")})}function S(i){const e=document.createElement("div");e.id="modal",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="black",e.style.display="flex",e.style.flexDirection="column",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="1000";const t=document.createElement("img");t.id="modalImage",t.src=i,t.style.maxWidth="90%",t.style.maxHeight="80%",t.style.objectFit="contain",t.style.position="absolute";const n=document.createElement("canvas");n.id="canvasElement",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="10",e.appendChild(t),e.appendChild(n);const o=document.createElement("button");o.id="submit-btn",o.textContent="Submit",o.style.position="absolute",o.style.padding="10px",o.style.backgroundColor="#fff",o.style.border="none",o.style.cursor="pointer",o.style.top="20px",o.style.right="20px",o.style.borderRadius="5px",o.style.zIndex="20",e.appendChild(o);const s=document.createElement("textarea");s.id="desc",s.style.width="60%",s.style.marginTop="90px",s.style.padding="10px",s.style.fontSize="14px",s.style.borderRadius="5px",s.style.border="1px solid #ccc",s.placeholder="Write description...",e.appendChild(s),document.getElementById("canvas-container").appendChild(e);const a=new fabric.Canvas(n);a.isDrawingMode=!0,a.freeDrawingBrush=new fabric.PencilBrush(a),a.freeDrawingBrush.width=5,a.freeDrawingBrush.color="#000000",t.onload=function(){a.setWidth(t.width),a.setHeight(t.height),a.renderAll()},a.on("path:created",function(){const u=a.toDataURL();console.log(u,">>>new")}),o.addEventListener("click",function(){o.style.display="none",html2canvas(e).then(function(u){const g=u.toDataURL("image/png"),f=h(g),b=s.value;console.log(b,">>>desc");const v={metadata:{batteryInfo:[{isCharging:!0,lowPowerMode:!0,batteryPercentage:"75%",capturedAt:"2024-11-08T10:33:12.624Z",duration:"15m"}],network:[{type:"Wi-Fi",status:"connected",rssi:"-60dBm",ssid:"MyWiFiNetwork",bssid:"00:14:22:01:23:45",mcc:"310",mnc:"260",name:"Home Wi-Fi",networkCountryCode:"US",simCountryCode:"US",phoneType:"Smartphone",capturedAt:"2024-11-08T10:33:15.000Z",duration:"5m"}],deviceOrientation:[{value:"portrait",capturedAt:"2024-11-08T10:33:20.000Z",duration:"10m"}],applicationState:[{value:"foreground",capturedAt:"2024-11-08T10:33:25.000Z",duration:"7m"}],multiWindow:[{value:!1,capturedAt:"2024-11-08T10:33:30.000Z",duration:"5m"}],topView:[{value:"com.example.app.MainActivity",capturedAt:"2024-11-08T10:33:35.000Z",duration:"6m"}],cpuUtilization:[{value:"18%",capturedAt:"2024-11-08T10:33:40.000Z",duration:"5m"}],flash:[{capturedAt:"2024-11-08T10:33:45.000Z",memory:"30MB",unit:"MB"}],memory:[{capturedAt:"2024-11-08T10:33:50.000Z",memory:"1.8GB",unit:"GB"}],bluetooth:[{isConnected:!0,name:"Bluetooth Speaker",capturedAt:"2024-11-08T10:33:12.624Z",duration:"15m"}]}};var d=new JSZip;d.file("snapshot.jpeg",f),d.file("meta.json",JSON.stringify(v)),console.log(d,">>> zip object"),console.log(c,"url_for_zip_file"),d.generateAsync({type:"blob"}).then(function(m){console.log(m,">>> generated zip content");const y=new File([m],`${w}`,{type:"application/zip"});console.log(y,">>> created zip file"),fetch(c,{method:"PUT",body:y}).then(r=>r.json()).then(r=>{console.log("API Response:",r),o.style.display="block"}).catch(r=>{console.error("Error uploading ZIP:",r),o.style.display="block"}),k()})})})}function k(){const i=document.getElementById("modal"),e=document.getElementById("canvas-container"),t=document.getElementById("def-img"),n=document.getElementById("def-camera"),o=document.getElementById("def-ui"),s=document.getElementById("modalImage"),l=document.getElementById("canvasElement");l&&l.remove(),i&&i.remove(),s&&s.remove(),e&&e.remove(),document.body.appendChild(e),document.body.appendChild(o),o.appendChild(n),document.body.appendChild(t),n.textContent="Capture"}function T(){const i=document.createElement("div"),e=document.createElement("button"),t=document.createElement("img"),n=document.createElement("div");t.id="def-img",e.id="def-camera",i.id="def-ui",n.id="canvas-container",e.textContent="Capture",e.style.color="black",e.style.fontSize="16px",e.style.fontWeight="400",e.style.backgroundColor="white",e.style.width="80%",e.style.height="80%",e.style.position="relative",e.style.top="50%",e.style.left="50%",e.style.borderRadius="6px",e.style.border="none",e.style.transform="translate(-50%, -50%)",e.style.cursor="pointer",e.style.zIndex="100",i.style.position="fixed",i.style.bottom="16px",i.style.right="16px",i.style.width="120px",i.style.height="60px",i.style.backgroundColor="black",i.style.borderRadius="10px",i.style.zIndex="100",i.style.background="gray",t.style.position="fixed",t.style.width="24vw",t.style.height="30vh",t.style.objectFit="contain",t.style.right="16px",t.style.bottom="80px",t.style.borderRadius="12px",t.style.opacity="0",t.style.background="gray",t.style.zIndex="100",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.height="100%",n.style.zIndex="10",document.body.appendChild(n),document.body.appendChild(i),i.appendChild(e),document.body.appendChild(t)}function h(i){const e=atob(i.split(",")[1]),t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const n=i.split(";")[0].split(":")[1];return new Blob([t],{type:n})}
